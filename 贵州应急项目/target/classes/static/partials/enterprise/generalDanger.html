<div ng-controller="generalDCtrl" >
    <div class="tab-task">
        <div class="tab-nav">
            <button class="tab-button" ui-sref="riskInvest.tabTodo" ui-sref-active="active">
                待办任务
            </button>
            <button class="tab-button" ui-sref="riskInvest.tabFinish" ui-sref-active="active">
                已办任务
            </button>
            <button class="tab-button" ui-sref="riskInvest.majorDanger" ui-sref-active="active">
                重大隐患
            </button>
            <button class="tab-button" ui-sref="riskInvest.generalDanger" ui-sref-active="active" >
                一般隐患
            </button>
            <button class="tab-button" ui-sref="riskInvest.manageDanger" ui-sref-active="active">
                应急管理隐患
            </button>
        </div>
    </div>
    <div class="table-content">
        <div  class="clearfix">
            排查日期：<input cgs-date-picker placeholder="开始日期" date-fmt="yyyy-MM-dd"
                        ng-model="page.strTime" /> ~
            <input cgs-date-picker placeholder="结束日期" date-fmt="yyyy-MM-dd"
                   ng-model="page.endTime"  style="margin-right: 20px"/>
            整改情况：
            <select>
                <option value="0">全部</option>
                <option value="1">已整改</option>
                <option value="2">未整改</option>
            </select>
            <button class="searchBtn" style="margin-left: 20px"><i class="iconfont icon-sousuo"></i>搜索</button>
            <div class="fr">
                治理期限：<span class="danger">超期</span>
            </div>
        </div>

        <table style="margin-top: 16px;">
            <thead>
            <tr>
                <th>序号</th>
                <th>排查项目</th>
                <th>排查结果</th>
                <th>排查日期</th>
                <th>治理期限</th>
                <th>整改情况</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="item in page.list.dataList">
                <td>{{(page.currentPage-1)*page.pageSize+$index+1}}</td>
                <td>{{item.name}}</td>
                <td>{{item.result==1?'否':item.result==2?'其他情况':'是'}}</td>
                <td>{{item.time | date:'yyyy-MM-dd'}}</td>
                <td  ng-class="page.listLine[$index]==false&&item.isRectification==0?'dangerColor':''">
                    {{item.deadline | date:'yyyy-MM-dd'}}
                </td>
                <td>{{item.isRectification==0?'未整改':item.isRectification==1?'正在整改':'已整改'}}</td>
                <td>
                    <span class="hander oper"
                          ui-sref="riskInvest.DangerDetail({id:item.id,level:'general',operate:'yes'})">
                        详情
                    </span>

                </td>
            </tr>
            </tbody>
        </table>
        <p class="dangerColor noDate"  ng-if="noData==true">无数据</p>
        <uib-pagination
                ng-change="getManageDetail()"
                total-items="page.total"
                ng-model="page.currentPage"
                items-per-page="page.pageSize"
                first-text="first"
                class="pagination"
                boundary-link-numbers="true"
                direction-links="false"
                rotate="false">
        </uib-pagination>
        <div class="clearfix"></div>
    </div>

</div>
