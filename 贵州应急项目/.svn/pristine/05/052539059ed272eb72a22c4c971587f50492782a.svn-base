package com.sucsoft.gzhbyjwz.util.time;

import java.util.Calendar;
import java.util.List;
import java.util.Map;

public class TimeStateDay implements TimeState{

	//时间范围，毫秒
	private long start;
	private long end;
	private long current;
	
	private static final int state = TimeState.DAY;
	
	private static final int range = 86400000;//24*60*60*1000
	
	private List<Map<String, Object>> nodeList;

	public TimeStateDay(long start, long end) {
		super();
		this.start = start;
		this.current = this.start;
		this.end = end;
	}
	
	@Override
	public boolean hasNext() {
		return (current < end) && (current >= start) ;
	}
	
	
	public static long getDayStart(long time) {
		//Date date = new Date(time);
		Calendar cal = Calendar.getInstance();
		cal.setTimeInMillis(time);
		cal.set(Calendar.HOUR, 0);
		cal.set(Calendar.MINUTE, 0);
		cal.set(Calendar.SECOND, 0);
		return cal.getTimeInMillis();
	}
	
	@Override
	public long getStart() {
		return start;
	}

	@Override
	public long getEnd() {
		return end;
	}

	public long getCurrent() {
		return current;
	}

	public static int getState() {
		return state;
	}

	public void setStart(long start) {
		this.start = start;
	}

	public void setEnd(long end) {
		this.end = end;
	}

	public void setCurrent(long current) {
		this.current = current;
	}

	@Override
	public String getName() {
		// TODO Auto-generated method stub
		Calendar cal = Calendar.getInstance();
		cal.setTimeInMillis(current);
		return cal.get(Calendar.YEAR)+"-"+(cal.get(Calendar.MONTH)+1)+"-"+cal.get(Calendar.DAY_OF_MONTH);
	}

	@Override
	public Long next() {
		// TODO Auto-generated method stub
		//long result = current;
		current = current+range;
		current = getDayStart(current);
				
		if (current<end) {
			return current;
		}else{
			return end;
		}
	}




}
