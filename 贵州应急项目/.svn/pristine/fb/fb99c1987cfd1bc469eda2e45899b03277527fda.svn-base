package com.sucsoft.gzhbyjwz.util;

import java.io.Serializable;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.cgs.dc.starter.services.UnsafeCrudService;

@Service
public class FilterCrudService {

	@Autowired 
	private UnsafeCrudService crudService;
	
	//在map中，不需要更新的字段通常为null，为防止这些null值把原有字段覆盖，进行一次过滤。
	public void updateNotNull(Serializable id, Map<String, Object> map, String entityName) {
		Map<String, Object> newMap = new HashMap<>();
		//去除为null的字段
		for(Entry<String, Object> entry:map.entrySet()){
			if (entry.getValue() != null) {
				newMap.put(entry.getKey(), entry.getValue());
			}
		}
		crudService.update(id, newMap, entityName);
	}
}
