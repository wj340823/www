package com.sucsoft.gzhbyjwz.service.riskmanage;

import com.sucsoft.gzhbyjwz.bean.common.Page;
import com.sucsoft.gzhbyjwz.bean.param.riskManage.HiddenDangerParam;
import com.sucsoft.gzhbyjwz.service.common.BasicQueryService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;

import java.util.*;

@Service
public class HiddenDangerService {
    @Autowired
    private BasicQueryService basicQueryService;

    @Value("${application.xzqy}")
    private String applicationXzqy;

    //根据条件查询隐患列表
    public Page listHiddenDanger(HiddenDangerParam dangerParam, Integer pageNo, Integer pageSize) throws Exception {
        Map<String, Object> param = dangerParam.toParam();

        return basicQueryService.queryForPage("listHiddenDanger", param, Map.class, pageNo, pageSize);
    }

    //获取单个隐患详情
    public Map getRiskDetailById(Integer id) throws Exception {
        Map<String, Object> param = new HashMap<>();
        param.put("id",id);

        List<Map> list = basicQueryService.queryForList("getRiskDetailById", param, Map.class, 0, 0);
        if (list.size()>0){
            return list.get(0);
        }
        return null;
    }

    //获取单个应急管理隐患详情
    public Map getEmergencyDetailById(Integer id) throws Exception {
        Map<String, Object> param = new HashMap<>();
        param.put("id",id);

        List<Map> list = basicQueryService.queryForList("getEmergencyDetailById", param, Map.class, 0, 0);
        if (list.size()>0){
            return list.get(0);
        }

        return null;
    }

    /**
     * 回显隐患列表
     * @param param
     * @return
     * @throws Exception
     */
    public Object echoHiddenDanger(HiddenDangerParam param) throws Exception {
        Page page = listHiddenDanger(param,0,0);
        List list = page.getDataList();
        //Multimap<String,Map>
        return null;
    }


}