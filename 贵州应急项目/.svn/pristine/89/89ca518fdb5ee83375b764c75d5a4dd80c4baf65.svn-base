package com.sucsoft.gzhbyjwz.controller.app;


import com.sucsoft.gzhbyjwz.service.app.AppService;
import io.swagger.annotations.Api;
import io.swagger.annotations.ApiOperation;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.MediaType;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.multipart.MultipartFile;

import javax.servlet.http.HttpServletResponse;
import java.util.List;

@RestController
@RequestMapping("/app")
@Api(value="app基础数据模块",description="app基础数据模块")
public class BasicAppController {

    @Autowired
    private AppService appService;


    @RequestMapping(value="/updateVersion",method= RequestMethod.POST)
    @ApiOperation(httpMethod="POST",value="更新apk版本",notes="更新apk版本",
            response=List.class,produces= MediaType.TEXT_PLAIN_VALUE)
    public Object updateVersion(String versionId, @RequestParam MultipartFile file) throws Exception {

        return appService.updateVersion(versionId,file);
    }

    @RequestMapping(value="/checkVersion",method= RequestMethod.GET)
    @ApiOperation(httpMethod="GET",value="检查版本更新",notes="返回true为需要，false为不需要",
            response=List.class,produces= MediaType.TEXT_PLAIN_VALUE)
    public boolean listXzqy(String versionId) throws Exception {

        boolean b = appService.checkVersion(versionId);
        return b;
    }

    @RequestMapping(value="/downloadApk",method= RequestMethod.GET)
    @ApiOperation(httpMethod="GET",value="下载最新的apk",notes="下载最新的apk",
            response=List.class,produces= MediaType.TEXT_PLAIN_VALUE)
    public Object downloadApk(HttpServletResponse response) throws Exception {

        return appService.downloadApk(response);
    }

    @RequestMapping(value="/getDangerUnitInfo",method= RequestMethod.GET)
    @ApiOperation(httpMethod="GET",value="微信二维码扫码信息",notes="微信二维码扫码信息，参数id：存储罐的id",
            response=List.class,produces= MediaType.TEXT_PLAIN_VALUE)
    public Object getDangerUnitInfo(String id,String companyId) throws Exception {

        return appService.getDangerUnitInfo(id,companyId);
    }


}
